# Инструкция по деплою

## Проблема с размером образа

Если платформа показывает ошибку "Static files size exceeds limit (50.00MB)", это значит что она распаковывает весь Docker образ включая builder stage.

## Решение: сборка локально

**Важно:** Этот Dockerfile использует только готовые файлы из `dist/`, поэтому нужно собрать проект локально перед деплоем.

### Шаги:

1. **Собери проект локально:**

   ```bash
   npm install
   npm run build
   ```

2. **Проверь размер dist (должен быть ~672KB):**

   ```bash
   du -sh dist
   ```

3. **Собери Docker образ:**

   ```bash
   docker build -t telegram-app-shad .
   ```

4. **Проверь размер образа:**

   ```bash
   docker images telegram-app-shad
   ```

   Должен быть ~10-15MB (только nginx + dist)

5. **Задеплой на платформу**

### Автоматизация (опционально):

Можно использовать скрипт:

```bash
chmod +x deploy.sh
./deploy.sh
```

## Альтернатива: CI/CD

Если используешь GitHub Actions или другой CI, добавь шаг сборки перед docker build.

## Размеры:

- `dist/`: ~672KB (только статика)
- Финальный Docker образ: ~10-15MB (nginx:alpine + dist)
- Builder stage НЕ попадает в финальный образ
